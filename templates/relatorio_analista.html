<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Relatório de Monitoria</title>
</head>
<body>
    <h1>Relatório de Monitoria - Analista</h1>

    <form method="POST">
        <label for="analista">Analista:</label>
        <select name="analista" id="analista">
            <option value="">Selecione</option>
            {% for analista in analistas %}
                <option value="{{ analista.nome_analista }}">{{ analista.nome_analista }}</option>
            {% endfor %}
        </select>

        <label for="data_inicio">Data Início:</label>
        <input type="date" name="data_inicio" id="data_inicio">

        <label for="data_fim">Data Fim:</label>
        <input type="date" name="data_fim" id="data_fim">

        <button type="submit">Filtrar</button>
    </form>

    <h2>Resultados</h2>
    {% if resultados %}
        <table border="1">
            <thead>
                <tr>
                    <th>Nome do Analista</th>
                    <th>Data Monitoria</th>
                    <th>Pontuação Total</th>
                    <th>Média</th>
                    <th>Itens Avaliados</th>
                </tr>
            </thead>
            <tbody>
                {% for resultado in resultados %}
                    <tr>
                        <td>{{ resultado.monitoria.nome_analista }}</td>
                        <td>{{ resultado.monitoria.data_monitoria }}</td>
                        <td>{{ resultado.total_pontos }}</td>
                        <td>{{ resultado.media }}</td>
                        <td>
                            <ul>
                                <li>Se Apresentou: {{ resultado.monitoria.se_apresentou }}</li>
                                <li>Atendeu Prontidão: {{ resultado.monitoria.atendeu_prontidao }}</li>
                                <li>Ouviu Demanda: {{ resultado.monitoria.ouviu_demanda }}</li>
                                <li>Demonstrou Empatia: {{ resultado.monitoria.demonstrou_empatia }}</li>
                                <li>Realizou Sondagem: {{ resultado.monitoria.realizou_sondagem }}</li>
                                <li>Argumentou Cancelamento: {{ resultado.monitoria.argumentou_cancelamento }}</li>
                                <li>Respeitou Cliente: {{ resultado.monitoria.respeitou_cliente }}</li>
                                <li>Confirmação Cadastral: {{ resultado.monitoria.confirmacao_cadastral }}</li>
                                <li>Contornou ODC: {{ resultado.monitoria.contornou_odc }}</li>
                                <li>Seguiu Procedimentos: {{ resultado.monitoria.seguiu_procedimentos }}</li>
                            </ul>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>

        <h3>Média Consolidada: {{ media_consolidada }}%</h3>
        <h3>Pontuação Média por Item</h3>
        <ul>
            <li>Se Apresentou: {{ media_se_apresentou }}%</li>
            <li>Atendeu Prontidão: {{ media_atendeu_prontidao }}%</li>
            <li>Ouviu Demanda: {{ media_ouviu_demanda }}%</li>
            <li>Demonstrou Empatia: {{ media_demonstrou_empatia }}%</li>
            <li>Realizou Sondagem: {{ media_realizou_sondagem }}%</li>
            <li>Argumentou Cancelamento: {{ media_argumentou_cancelamento }}%</li>
            <li>Respeitou Cliente: {{ media_respeitou_cliente }}%</li>
            <li>Confirmação Cadastral: {{ media_confirmacao_cadastral }}%</li>
            <li>Contornou ODC: {{ media_contornou_odc }}%</li>
            <li>Seguiu Procedimentos: {{ media_seguiu_procedimentos }}%</li>
        </ul>
    {% else %}
        <p>Nenhum resultado encontrado.</p>
    {% endif %}
</body>
</html>
