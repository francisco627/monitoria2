<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Relatório de Pontuação</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<header>
    <img src="{{ url_for('static', filename='img/logo.png') }}" alt="Logo" class="logo">
    <h2>Relatório de Pontuação</h2>
</header>

<div class="container">
    <form method="POST">
        <div class="form-group">
            <label for="analista">Analista:</label>
            <select name="analista" id="analista">
                <option value="">Selecione</option>
                {% for analista in analistas %}
                    <option value="{{ analista.matricula }}">{{ analista.nome }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group">
            <label for="data_inicio">Data Início:</label>
            <input type="date" name="data_inicio" id="data_inicio">
        </div>

        <div class="form-group">
            <label for="data_fim">Data Fim:</label>
            <input type="date" name="data_fim" id="data_fim">
        </div>

        <div class="form-group">
            <button type="submit">Filtrar</button>
        </div>
    </form>

    <!-- Exibindo os dados do analista -->
    {% for analista, items in media_pontuacao_por_analista.items() %}
        <h3>Analista: {{ analista }}</h3>
        <ul>
            <li>Se Apresentou: {{ items.se_apresentou }}</li>
            <li>Atendeu Prontidão: {{ items.atendeu_prontidao }}</li>
            <li>Ouviu Demanda: {{ items.ouviu_demanda }}</li>
            <li>Demonstrou Empatia: {{ items.demonstrou_empatia }}</li>
            <li>Realizou Sondagem: {{ items.realizou_sondagem }}</li>
        </ul>
        <p><strong>Média das Notas: </strong>{{ nota_media_por_analista[analista].media }}</p>
        <p><strong>Quantidade de Monitorias: </strong>{{ nota_media_por_analista[analista].quantidade }}</p>
    {% endfor %}

    <!-- Gráfico -->
    <div class="chart-container">
        <canvas id="graficoAnalista"></canvas>
    </div>

    <script>
        var ctx = document.getElementById('graficoAnalista').getContext('2d');
        var grafico = new Chart(ctx, {
            type: 'bar',
            data:  {
    labels: ["Se Apresentou", "Atendeu Prontidão", "Ouviu Demanda", "Demonstrou Empatia", "Realizou Sondagem"],
    datasets: [{
        label: "Pontuação Alcançada",
        data: [10, 15, 10, 10, 15],
        backgroundColor: "rgba(75, 192, 192, 0.2)",
        borderColor: "rgba(75, 192, 192, 1)",
        borderWidth: 1
    }, {
        label: "Pontuação Máxima",
        data: [10, 15, 10, 10, 15],
        backgroundColor: "rgba(255, 99, 132, 0.2)",
        borderColor: "rgba(255, 99, 132, 1)",
        borderWidth: 1
    }]
},
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    </script>
</div>

</body>
</html>
